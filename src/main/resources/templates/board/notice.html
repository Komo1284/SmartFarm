<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>공지사항</title>
	<style>
		.content {
			font-family: 'Arial', sans-serif; /* 기본 글꼴 설정 */
			font-size: 14px; /* 기본 폰트 크기 설정 */
			text-decoration: none; /* 링크 밑줄 제거 */
			color: black; /* 링크 색상 설정 */
		}
		.page {
			display: flex;
			width: 70%;
			list-style: none;
		}
		.page li {
			padding: 0 5px;
		}

	</style>
</head>
<body>


	<div th:replace="~{piece :: header}"></div>

	<h1>공지사항</h1>
	<hr>

	<main th:with="list=${map['list']}, pg=${map['pg']}">
	<table>
		<tr>
			<th>제목</th>
			<th>내용</th>
			<th>조회수</th>
			<th>작성자</th>
			<th>작성일</th>
		</tr>
		<tr th:each="notice : ${list}">
			<td th:text="${notice.title}"></td>
			<td><a class="content"
				th:href="@{/board/notice_view/{id}(id=${notice.id})}"
				th:utext="${#strings.length(notice.contents) > 10 ? 
                #strings.substring(notice.contents, 0, 10) : notice.contents}"></a></td>
			<td th:text="${notice.v_count}"></td>
			<td th:text="${notice.nick}"></td>
			<td th:text="${notice.w_date}"></td>
		</tr>
	</table>
	<br>

	<ul class="page" th:with="groupParam=${param.group != null ? 'group=' + param.group : ''}, searchParam=${param.search != null ? 'search=' + param.search : ''}">
		<li th:if="${pg.prev}">
			<a th:href="@{|/board/notice?page=${pg.begin - 1}&${groupParam}&${searchParam}|}">
				이전
			</a>
		</li>

		<li th:each="i : ${#numbers.sequence(pg.begin, pg.end)}">
			<a th:href="@{|/board/notice?page=${i}&${groupParam}&${searchParam}|}">
				<span th:text="${i}"></span>
			</a>
		</li>

		<li th:if="${pg.next}">
			<a th:href="@{|/board/notice?page=${pg.end + 1}&${groupParam}&${searchParam}|}">
				다음
			</a>
		</li>
	</ul>

	<form th:action="@{/board/notice}" method="get">
		<select name="group">
			<option value="title">제목</option>
			<option value="nick">작성자</option>
			<option value="contents">내용</option>
		</select>

		<input name="search" type="text">

		<button type="submit">검색</button>
	</form>


	<br>

	<a href="/board/notice_write"><button>글 작성</button></a>

	</main>
	<div th:replace="~{piece :: footer}"></div>

</body>
</html>
